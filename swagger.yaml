---
swagger: "2.0"
info:
  description: "This is the full local API for Agent DVR.  You can find out more about\
    \ AgentDVR at [https://www.ispyconnect.com](https://www.ispyconnect.com)\
    \ This interface uses the default API endpoint of http://localhost:8090. You will need Agent DVR installed and running to use it."
  version: "1.0.5"
  title: 'Agent DVR'
  version: "4.4.5.0"
  termsOfService: "https://www.ispyconnect.com/terms.aspx"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
host: "localhost:8090"
basePath: "/"
consumes:
    - "application/json"
definitions:
    Alert:
        properties:
            ot:
                type: integer
            oid:
                type: integer
            reason:
                type: string
            msg:
                type: string
            time:
                type: string
            id:
                type: string
            read:
                type: boolean
            tags:
                type: string
    AlertsResponse:
        properties:
            alerts:
                items:
                    $ref: '#/definitions/Alert'
                type: array
    Event:
        properties:
            Ago:
                type: integer
            Ident:
                type: string
            Type:
                type: string
paths:
    /alerts.json:
        get:
            summary: Returns collection of the current alerts
            operationId: alerts.json
            produces:
                - application/json
            responses:
                "200":
                    description: Returns collection of the current alerts
                    schema:
                        $ref: '#/definitions/AlertsResponse'
            tags: 
            - Alerts
    /audio.mp3:
        get:
            summary: Returns live audio from the specified microphone in mp3 format
            operationId: audio.mp3
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            produces:
                - audio/mpeg
            responses:
                "200":
                    description: Returns live audio from the specified microphone in mp3 format
            tags: 
            - Audio
    /audio.ogg:
        get:
            summary: Returns live audio from the specified microphone in ogg format
            operationId: audio.ogg
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            produces:
                - application/ogg
            responses:
                "200":
                    description: Returns live audio from the specified microphone in ogg format
            tags: 
            - Audio
    /command.json:
        get:
            description: Commands
            operationId: command.json
            parameters:
            - description: Command
              enum:
                - alert
                - alertOff
                - alertOn
                - allOff
                - allOn
                - applySchedule
                - applyScheduleToDevice
                - arm
                - blockexternal
                - cloudPhotosOff
                - cloudPhotosOn
                - cloudRecordingsOff
                - cloudRecordingsOn
                - detect
                - disArm
                - ftpframe
                - ftpPhotosOff
                - ftpPhotosOn
                - ftpRecordingsOff
                - ftpRecordingsOn
                - getObject
                - getObjects
                - getProfiles
                - getStatus
                - ping
                - record
                - recordingOff
                - recordOnAlertOn
                - recordOnDetectOn
                - recordStop
                - reloadConfig
                - reloadObjects
                - restart
                - rtmpStop
                - runstoragemgmt
                - saveLocalOff
                - saveLocalOn
                - scheduleOff
                - scheduleOn
                - setdeepstackurl
                - setProfile
                - seturi
                - snapshot
                - stopCloudUploads
                - switchOff
                - switchOn
                - triggerface
                - triggerlpr
                - triggerobject
                - triggertask
                - unblockexternal
              in: query
              name: cmd
              required: true
              type: string
            produces:
                - application/json
            responses:
                "200":
                  description: OK
            tags: 
            - Command
    /command/allOff:
        get:
            summary: allOff
            operationId: /command/allOff
            produces:
                - application/json
            responses:
                "200":
                    description: allOff
            tags: 
            - Commands
    /command/allOn:
        get:
            summary: allOn
            operationId: /command/allOn
            produces:
                - application/json
            responses:
                "200":
                    description: allOn
            tags: 
            - Commands
    /command/applySchedule:
        get:
            summary: applySchedule
            operationId: /command/applySchedule
            produces:
                - application/json
            responses:
                "200":
                    description: applySchedule
            tags: 
            - Commands
    /command/arm:
        get:
            summary: arm
            operationId: /command/arm
            produces:
                - application/json
            responses:
                "200":
                    description: arm
            tags: 
            - Commands
    /command/blockexternal:
        get:
            summary: blockexternal
            operationId: /command/blockexternal
            produces:
                - application/json
            responses:
                "200":
                    description: blockexternal
            tags: 
            - Commands
    /command/disArm:
        get:
            summary: disArm
            operationId: /command/disArm
            produces:
                - application/json
            responses:
                "200":
                    description: disArm
            tags: 
            - Commands
    /command/getObjects:
        get:
            summary: getObjects
            operationId: /command/getObjects
            produces:
                - application/json
            responses:
                "200":
                    description: getObjects
            tags: 
            - Commands
    /command/getProfiles:
        get:
            summary: getProfiles
            operationId: /command/getProfiles
            produces:
                - application/json
            responses:
                "200":
                    description: getProfiles
            tags: 
            - Commands
    /command/getStatus:
        get:
            summary: getStatus
            operationId: /command/getStatus
            produces:
                - application/json
            responses:
                "200":
                    description: getStatus
            tags: 
            - Commands
    /command/ping:
        get:
            summary: ping
            operationId: /command/ping
            produces:
                - application/json
            responses:
                "200":
                    description: ping
            tags: 
            - Commands
    /command/reloadConfig:
        get:
            summary: reloadConfig
            operationId: /command/reloadConfig
            produces:
                - application/json
            responses:
                "200":
                    description: reloadConfig
            tags: 
            - Commands
    /command/reloadObjects:
        get:
            summary: reloadObjects
            operationId: /command/reloadObjects
            produces:
                - application/json
            responses:
                "200":
                    description: reloadObjects
            tags: 
            - Commands
    /command/restart:
        get:
            summary: restart
            operationId: /command/restart
            produces:
                - application/json
            responses:
                "200":
                    description: restart
            tags: 
            - Commands
    /command/rtmpStop:
        get:
            summary: rtmpStop
            operationId: /command/rtmpStop
            produces:
                - application/json
            responses:
                "200":
                    description: rtmpStop
            tags: 
            - Commands
    /command/runstoragemgmt:
        get:
            summary: runstoragemgmt
            operationId: /command/runstoragemgmt
            produces:
                - application/json
            responses:
                "200":
                    description: runstoragemgmt
            tags: 
            - Commands
    /command/stopCloudUploads:
        get:
            summary: stopCloudUploads
            operationId: /command/stopCloudUploads
            produces:
                - application/json
            responses:
                "200":
                    description: stopCloudUploads
            tags: 
            - Commands
    /command/unblockexternal:
        get:
            summary: unblockexternal
            operationId: /command/unblockexternal
            produces:
                - application/json
            responses:
                "200":
                    description: unblockexternal
            tags: 
            - Commands
    /events.json:
        get:
            summary: Return a collection of event objects with details of the device events
            operationId: events.json
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Object TypeID
              enum:
              - 1
              - 2
              in: query
              name: ot
              required: true
              type: integer
            - description: Seconds
              in: query
              name: seconds
              required: true
              minimum: 1
              maximum: 600
              type: integer
            produces:
                - application/json
            responses:
                "200":
                    description: Return a collection of event objects with details of the device events over the last 60 seconds (seconds can be up to 600)
                    schema:
                        items:
                         $ref: '#/definitions/Event'
                        type: array
            tags: 
            - Events
    /grab.jpg:
        get:
            summary: Returns a still image for the specified object(s)
            operationId: grab.jpg
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: false
              type: integer
            - description: Object IDs (1,2,3,4)
              in: query
              name: oids
              required: false
              type: string
            - description: Background Color - RGB format (255,0,0)
              in: query
              name: backColor
              required: false
              type: string
            - description: Maintain Aspect Ratio
              in: query
              name: maintainAR
              required: false
              type: boolean
            - description: Size (320x240)
              in: query
              name: size
              required: false
              type: string
            produces:
                - image/jpeg
            responses:
                "200":
                    description: Returns a still image for the specified object(s)
            tags: 
            - Media
    /grabimage.jpg:
        get:
            summary: Returns a full size image for the specified object and filename
            operationId: grabimage.jpg
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Filename (2021-01-19_12-22-55_125.jpg)
              in: query
              name: fn
              required: true
              type: string
            produces:
                - image/jpeg
            responses:
                "200":
                    description: Returns a full size image for the specified object and filename
            tags: 
            - Media
    /grabthumb.jpg:
        get:
            summary: Returns a thumbnail image for the specified object and filename
            operationId: grabthumb.jpg
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Filename (2021-01-19_12-22-55_125.jpg)
              in: query
              name: fn
              required: true
              type: string
            produces:
                - image/jpeg
            responses:
                "200":
                    description: Returns a thumbnail image for the specified object and filename
            tags: 
            - Media
    /ptz.cgi:
        get:
            summary: PTZ controls
            operationId: ptz.cgi
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Command (the url encoded portion in the extended commands options from the PTZ2.xml)
              in: query
              name: cmd
              required: false
              type: string
            - description: Direction (0 for center, 1 = left, 2=up left, 3 = up, 4 = up right, 5 = right, 6 = down right, 7 = down, 8 = down left, 9 = zoom in, 10 = zoom out, 11 = stop)
              enum:
              - 0
              - 1
              - 2
              - 3
              - 4
              - 5
              - 6
              - 7
              - 8
              - 9
              - 10
              - 11
              in: query
              name: dir
              required: false
              type: integer
            produces:
                - application/json
            responses:
                "200":
                    description: OK
            tags: 
            - PTZ
    /q.json:
        get:
            summary: Queries
            operationId: q.json
            parameters:
            - description: Command
              enum:
                - addcamera
                - addonvif
                - addrecording
                - appendtimestamp
                - armgroups
                - armprofile
                - disarmgroups
                - disarmprofile
                - getcameragrabs
                - getevents
                - getsessioncount
                - getstreamingstatus
                - recordRestart
                - setsensitivity
                - settimestamp
                - start-rtmp
                - start-rtmp-view
                - stop-rtmp
                - switchdetector
              in: query
              name: cmd
              required: true
              type: string
            produces:
                - application/json
            responses:
                "200":
                  description: OK
            tags: 
            - Query
    /q/getsessioncount:
        get:
            summary: getsessioncount
            operationId: /q/getsessioncount
            produces:
                - application/json
            responses:
                "200":
                  description: OK
            tags: 
            - Queries
    /q/getstreamingstatus:
        get:
            summary: plagetstreamingstatus
            operationId: /q/getstreamingstatus
            produces:
                - application/json
            responses:
                "200":
                  description: OK
            tags: 
            - Queries
    /streamfile:
        get:
            summary: Stream the file to the caller
            operationId: streamfile
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Object TypeID
              enum:
              - 1
              - 2
              in: query
              name: ot
              required: true
              type: integer
            - description: Filename (3_2021-01-21_16-34-42_977.mkv)
              in: query
              name: fn
              required: true
              type: string
            produces:
                - video/x-matroska
                - video/mp4
            responses:
                "200":
                    description: Stream the file to the caller. The filename is from the "fn" property in the json from the getevents call. It is up to the calling application to provide playback facility.
            tags: 
            - Streams
    /video.gif:
        get:
            summary: Generate an animated gif from the live camera stream
            operationId: video.gif
            parameters:
            - description: Object ID
              in: query
              name: oid
              required: true
              type: integer
            - description: Frame rate (FPS)
              in: query
              name: framerate
              required: true
              type: integer
            - description: Seconds
              in: query
              name: secs
              required: true
              type: integer
            - description: Size (640x480)
              in: query
              name: size
              required: true
              type: string
            produces:
                - image/gif
            responses:
                "200":
                    description: Generate an animated gif from the live camera stream
            tags: 
            - Media
    /video.mjpg:
        get:
            description: Grid of cameras
            operationId: video.mjpg
            parameters:
            - description: Object IDs (1,2,3,4)
              in: query
              name: oids
              required: true
              type: string
            - description: Background Color - RGB format (255,0,0)
              in: query
              name: backColor
              required: false
              type: string
            - description: Cycle (Seconds)
              in: query
              name: cycle
              required: false
              type: integer
            - description: Fit Type
              enum:
              - Zoom
              in: query
              name: fitType
              required: false
              type: string
            - description: Group
              in: query
              name: group
              required: false
              type: string
            - description: Maintain Aspect Ratio
              in: query
              name: maintainAR
              required: false
              type: boolean
            - description: Size (320x240)
              in: query
              name: size
              required: false
              type: string
            produces:
                - image/jpeg
            responses:
                "200":
                    description: Return a grid of cameras in mjpeg form
            tags: 
            - Media
    /video.mp4:
        get:
            summary: Returns a grid of cameras in mp4 form (the first camera with audio provides the audio stream)
            operationId: video.mp4
            parameters:
            - description: Object IDs (1,2,3,4)
              in: query
              name: oids
              required: true
              type: string
            - description: Size (320x240)
              in: query
              name: size
              required: false
              type: string
            produces:
                - video/mp4
            responses:
                "200":
                    description: Returns a grid of cameras in mp4 form (the first camera with audio provides the audio stream)
            tags: 
            - Media
    /video.webm:
        get:
            summary: Returns a grid of cameras in mp4 form (the first camera with audio provides the audio stream)
            operationId: video.webm
            parameters:
            - description: Object IDs (1,2,3,4)
              in: query
              name: oids
              required: true
              type: string
            - description: Size (320x240)
              in: query
              name: size
              required: false
              type: string
            produces:
                - video/mp4
            responses:
                "200":
                    description: Returns a grid of cameras in mp4 form (the first camera with audio provides the audio stream)
            tags: 
            - Media
produces:
    - application/json
schemes:
    - http
externalDocs:
  description: "Find out more about Agent DVR"
  url: "https://www.ispyconnect.com/"
